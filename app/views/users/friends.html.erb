<div class="endorsesaurus_container">
  <h2><%= @user.name %>'s Endorsesaurus Enclosure</h2>
</div>
<div class ="secondary-navbar-class">
  <ul class="secondary-navbar">
    <li class="secondary-nav-element"><%= link_to "Profile", @user %></li>
    <li class="secondary-nav-element"><%= link_to "Friends", friends_user_path(@user) %></li>
    <li class="secondary-nav-element"><%= link_to "Movie List", movies_user_path(@user) %></li>
    <li class="secondary-nav-element"><%= link_to "Show List", shows_user_path(@user) %></li>
  </ul>
</div>

<div class="left_col">
	<div class="photo"><%= image_tag 'profile.jpg' %></div>
	<div class=profile_info>
		<h2><%= @user.name %></h2>
		<h2>Points: <%= @user.points %></h2>
	</div>
  <% if current_user != @user && current_user.pending_friends.include?(@user)%>
    Friendship Pending...
  <% elsif current_user != @user && !current_user.friends.include?(@user) %>
    <% if current_user.requested_friendships.include?(@user) %>
      <%= link_to "Accept Friend", friendship_path(:id => @user), :method => "put" %> 
    <% else %>
      <%= link_to "Add Friend", friendships_path(:friend_id => @user), :method => :post %>
    <% end %>
  <% end %>
</div>

<div class="two_thirds_col">
  <h3><%= @user.name %>'s Friends</h3>
  <ul>
    <% @user.friends.each do |friend| %>
      <div class="friend_icon_wrapper">
        <%= link_to image_tag('profile.jpg'), friend, class: "photo_icon"%>
        <br>
        <%= link_to friend.name, friend, class: "text_center" %> 
        <br>
        <% if current_user == @user %>
          <%= link_to "(Delete)", friendship_path(:id => friend), :method => :delete, class: "text_center" %>
        <% end %>
        <br>
        <br>
      </div>
    <% end %>
  </ul>

  <% if current_user == @user %>
      <h4>Friend Requests</h4>
      <ul>
        <% @user.requested_friendships.each do |request| %>
          <div class="friend_icon_wrapper">
            <%= link_to image_tag('profile.jpg'), request, class: "photo_icon"%>
            <br>
            <%= link_to request.name, request, class: "text_center" %>
            <br>
            <%= link_to "(Accept)", friendship_path(:id => request), :method => "put", class: "text_center" %>
            <br>
            <%= link_to "(Decline)", friendship_path(:id => request), :method => :delete, class: "text_center" %>
            <br>
            <br>
          </div>
        <% end %>
      </ul>
  <% end %>

   <% if current_user == @user %>
    <h4>Pending Requests</h4>
    <ul>
      <% @user.pending_friends.each do |request| %>
        <div class="friend_icon_wrapper">
          <%= link_to image_tag('profile.jpg'), request, class: "photo_icon"%>
          <br>
          <%= link_to request.name, request, class: "text_center" %> 
          <br>
          <br>
        </div>
      <% end %>
    </ul>
  <% end %>
</div>