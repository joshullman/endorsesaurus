<%= render partial: 'layouts/endorsesaurus_enclosure', locals: { current_user: current_user, user: @user } %>


<div class="profile_wrapper">

	<div class="left_column">
		<div class="badges_container">
			<h3 class="text_center">Badges</h3>
		</div>

		<div class="infographics">
			<% if !@most_liked_genres.empty? %>
				<div class="most_liked_genres">
					<span class="text_center">Most Liked Genres</span>
					<%= pie_chart(@most_liked_genres) %>
				</div>
			<% end %>
			<% if !@likes_distribution.empty? %>
				<div class="likes_distribution">
					<span class="text_center">Likes Distribution</span>
					<%= pie_chart(@likes_distribution) %>
				</div>
			<% end %>
		</div>
	</div>

	<div class="center_column">
		<div class="recommendations_container">
			<h3 class="text_center">Movie Recommendations:</h3>
			<div class="recommendation_wrapper">
				<% if @movie_recs && !@movie_recs.empty? %>
					<% @movie_recs.each do |rec| %>
						<%= render partial: 'layouts/recommended_movie_layout', locals: { user: @user, current_user_likes: @current_user_likes, rec: rec, current_user: current_user, percents: @percents[rec.info.medium_id]} %>
					<% end %>
				<% else %>
					<p>No Recommendations to show!</p>
				<% end %>
			</div>
		</div>
	</div>

	<div class="right_column">
		<div class="dashboard_recents_list">
			<h3 class="text_center">Recent</h3>
			<% @recent_activity.each do |note| %>
				<% case note.note_type %>
					<% when "RecNote" %>
						<div class="profile_event_wrapper">
							<%= render partial: 'layouts/event_rec_note', locals: { note: note, user: @user } %>
							<%= render partial: 'layouts/event_poster', locals: { media: note.media } %>
						</div>

					<% when "WatchedRecNote" %>
						<div class="profile_event_wrapper">
							<%= render partial: 'layouts/event_watched_rec_note', locals: { note: note, user: @user } %>
							<%= render partial: 'layouts/event_poster', locals: { media: note.media } %>
						</div>

					<% when "WatchedNote" %>
						<div class="profile_event_wrapper">
							<%= render partial: 'layouts/event_watched_note', locals: { note: note, user: @user } %>
							<%= render partial: 'layouts/event_poster', locals: { media: note.media } %>
						</div>

				<% end %>
				<br>
			<% end %>
		</div>
	</div>
</div>